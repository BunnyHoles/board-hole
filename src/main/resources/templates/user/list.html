<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/base :: layout(~{::title}, ~{::main})}">
<head>
    <title>사용자 관리 - Board Hole</title>
</head>

<main>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 text-gradient">사용자 관리</h1>
        <div class="d-flex align-items-center gap-3">
            <span class="badge bg-light text-dark fs-6" th:if="${users.totalElements > 0}">
                총 <span th:text="${users.totalElements}">0</span>명
            </span>
        </div>
    </div>

    <!-- 사용자 목록 -->
    <div class="card card-modern">
        <div class="card-body p-0">
            <div th:if="${users.content.empty}" class="text-center p-5">
                <svg width="64" height="64" fill="currentColor" viewBox="0 0 16 16" class="text-muted mb-3">
                    <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                </svg>
                <p class="text-muted">등록된 사용자가 없습니다.</p>
            </div>
            
            <div th:unless="${users.content.empty}">
                <!-- 반응형 사용자 카드 목록 -->
                <div class="row g-4 p-4">
                    <div class="col-md-6 col-lg-4" th:each="user : ${users.content}">
                        <div class="card card-modern h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <!-- 사용자 아바타 -->
                                <div class="bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                                     style="width: 80px; height: 80px;">
                                    <svg width="32" height="32" fill="currentColor" viewBox="0 0 16 16" class="text-primary">
                                        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                        <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                                    </svg>
                                </div>
                                
                                <!-- 사용자 정보 -->
                                <h5 class="card-title mb-2" th:text="${user.name}">사용자명</h5>
                                <p class="text-muted small mb-3" th:text="${user.email}">email@example.com</p>
                                
                                <!-- 통계 정보 -->
                                <div class="row g-2 mb-3">
                                    <div class="col-6">
                                        <div class="bg-light rounded p-2">
                                            <div class="fw-semibold text-primary" th:text="${user.boardCount ?: 0}">0</div>
                                            <small class="text-muted">게시글</small>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="bg-light rounded p-2">
                                            <div class="fw-semibold text-success" th:text="${user.commentCount ?: 0}">0</div>
                                            <small class="text-muted">댓글</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 가입일 -->
                                <div class="text-muted small mb-3">
                                    가입일: <span th:text="${#temporals.format(user.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                                </div>
                                
                                <!-- 액션 버튼 -->
                                <a th:href="@{/users/{id}(id=${user.id})}" class="btn btn-modern btn-outline-primary btn-sm">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="me-1">
                                        <path d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                                        <path fill-rule="evenodd" d="M11.5 6.027a.5.5 0 1 1 .908.455l-1.5 3a.5.5 0 1 1-.908-.455l1.5-3zM10.5 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
                                    </svg>
                                    상세보기
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 페이지네이션 -->
                <div class="card-footer bg-transparent border-0 py-4" th:if="${users.totalPages > 1}">
                    <nav aria-label="사용자 페이지네이션">
                        <ul class="pagination justify-content-center mb-0">
                            <!-- 이전 페이지 -->
                            <li class="page-item" th:classappend="${users.first} ? 'disabled'">
                                <a class="page-link" 
                                   th:href="@{/users(page=${users.number - 1})}"
                                   th:if="${!users.first}">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                                    </svg>
                                </a>
                                <span class="page-link" th:if="${users.first}">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                                    </svg>
                                </span>
                            </li>

                            <!-- 페이지 번호 -->
                            <th:block th:each="pageNum : ${#numbers.sequence(0, users.totalPages - 1)}">
                                <li class="page-item" 
                                    th:if="${pageNum >= users.number - 2 and pageNum <= users.number + 2}"
                                    th:classappend="${pageNum == users.number} ? 'active'">
                                    <a class="page-link" 
                                       th:href="@{/users(page=${pageNum})}"
                                       th:text="${pageNum + 1}">1</a>
                                </li>
                            </th:block>

                            <!-- 다음 페이지 -->
                            <li class="page-item" th:classappend="${users.last} ? 'disabled'">
                                <a class="page-link" 
                                   th:href="@{/users(page=${users.number + 1})}"
                                   th:if="${!users.last}">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
                                    </svg>
                                </a>
                                <span class="page-link" th:if="${users.last}">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
                                    </svg>
                                </span>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- 총 사용자 수 표시 -->
    <div class="mt-3 text-muted text-center" th:unless="${users.content.empty}">
        <small>
            총 <strong th:text="${users.totalElements}">0</strong>명의 사용자 중 
            <strong th:text="${users.number * users.size + 1}">1</strong>-<strong th:text="${users.number * users.size + users.numberOfElements}">10</strong>명
        </small>
    </div>
 </main>
</html>
