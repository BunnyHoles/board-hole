<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/base :: layout(~{::title}, ~{::main})}">
<head>
    <title th:text="${user.name + ' 프로필 - Board Hole'}">사용자 프로필 - Board Hole</title>
</head>

<main>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 text-gradient">사용자 프로필</h1>
        <a href="/users" class="btn btn-modern btn-outline-secondary">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
            </svg>
            사용자 목록
        </a>
    </div>

    <div class="row g-4">
        <!-- 사용자 기본 정보 -->
        <div class="col-lg-4">
            <div class="card card-modern">
                <div class="card-body text-center">
                    <!-- 사용자 아바타 -->
                    <div class="bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                         style="width: 120px; height: 120px;">
                        <svg width="48" height="48" fill="currentColor" viewBox="0 0 16 16" class="text-primary">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                        </svg>
                    </div>
                    
                    <h4 class="card-title mb-2" th:text="${user.name}">사용자명</h4>
                    <p class="text-muted mb-3" th:text="${user.email}">email@example.com</p>
                    
                    <!-- 가입 정보 -->
                    <div class="bg-light rounded p-3 mb-3">
                        <div class="row g-2">
                            <div class="col-6">
                                <div class="text-center">
                                    <div class="fw-semibold text-primary fs-5" th:text="${user.boardCount ?: 0}">0</div>
                                    <small class="text-muted">게시글</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="text-center">
                                    <div class="fw-semibold text-success fs-5" th:text="${user.commentCount ?: 0}">0</div>
                                    <small class="text-muted">댓글</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-muted small">
                        <div class="d-flex justify-content-between mb-2">
                            <span>가입일:</span>
                            <span th:text="${#temporals.format(user.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>최근 로그인:</span>
                            <span th:text="${user.lastLoginAt != null ? #temporals.format(user.lastLoginAt, 'yyyy-MM-dd HH:mm') : '정보 없음'}">정보 없음</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 활동 내역 -->
        <div class="col-lg-8">
            <!-- 최근 게시글 -->
            <div class="card card-modern mb-4">
                <div class="card-header bg-transparent border-bottom">
                    <h5 class="card-title mb-0">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                            <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                        </svg>
                        최근 게시글
                    </h5>
                </div>
                <div class="card-body">
                    <div th:if="${user.recentBoards != null and not user.recentBoards.empty}">
                        <div class="d-flex align-items-start border-bottom pb-3 mb-3" th:each="board : ${user.recentBoards}">
                            <div class="flex-grow-1">
                                <h6 class="mb-1">
                                    <a th:href="@{/boards/{id}(id=${board.id})}" 
                                       class="text-decoration-none" th:text="${board.title}">게시글 제목</a>
                                </h6>
                                <div class="text-muted small">
                                    <span th:text="${#temporals.format(board.createdAt, 'yyyy-MM-dd HH:mm')}">작성일</span>
                                    <span class="mx-2">·</span>
                                    조회 <span th:text="${board.viewCount}">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div th:if="${user.recentBoards == null or user.recentBoards.empty}" class="text-center text-muted py-4">
                        <svg width="48" height="48" fill="currentColor" viewBox="0 0 16 16" class="mb-3">
                            <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                        </svg>
                        <p>작성한 게시글이 없습니다.</p>
                    </div>
                </div>
            </div>
            
            <!-- 최근 댓글 -->
            <div class="card card-modern">
                <div class="card-header bg-transparent border-bottom">
                    <h5 class="card-title mb-0">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                            <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                        </svg>
                        최근 댓글
                    </h5>
                </div>
                <div class="card-body">
                    <div th:if="${user.recentComments != null and not user.recentComments.empty}">
                        <div class="d-flex align-items-start border-bottom pb-3 mb-3" th:each="comment : ${user.recentComments}">
                            <div class="flex-grow-1">
                                <div class="text-truncate mb-2" th:text="${comment.content}">댓글 내용</div>
                                <div class="text-muted small">
                                    <a th:href="@{/boards/{id}(id=${comment.boardId})}" 
                                       class="text-decoration-none me-2" th:text="${comment.boardTitle}">게시글 제목</a>
                                    <span th:text="${#temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm')}">작성일</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div th:if="${user.recentComments == null or user.recentComments.empty}" class="text-center text-muted py-4">
                        <svg width="48" height="48" fill="currentColor" viewBox="0 0 16 16" class="mb-3">
                            <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                        </svg>
                        <p>작성한 댓글이 없습니다.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 활동 통계 -->
    <div class="row g-4 mt-2">
        <div class="col-lg-12">
            <div class="card card-modern">
                <div class="card-header bg-transparent border-bottom">
                    <h5 class="card-title mb-0">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                            <path d="M1 3.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9zM1.5 4v8h13V4H1.5z"/>
                            <path d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 7a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 3 7zm0 1.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
                        </svg>
                        활동 통계
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row g-4">
                        <div class="col-md-3">
                            <div class="text-center bg-light rounded p-3">
                                <div class="fw-bold text-primary fs-4" th:text="${user.totalBoardViews ?: 0}">0</div>
                                <small class="text-muted">총 게시글 조회수</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center bg-light rounded p-3">
                                <div class="fw-bold text-success fs-4" th:text="${user.totalComments ?: 0}">0</div>
                                <small class="text-muted">총 댓글 수</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center bg-light rounded p-3">
                                <div class="fw-bold text-info fs-4" th:text="${user.totalLikes ?: 0}">0</div>
                                <small class="text-muted">받은 좋아요</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center bg-light rounded p-3">
                                <div class="fw-bold text-warning fs-4" th:text="${#temporals.format(user.createdAt, 'yyyy년 MM월')}">2024년 01월</div>
                                <small class="text-muted">가입 시기</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
 </main>
</html>
