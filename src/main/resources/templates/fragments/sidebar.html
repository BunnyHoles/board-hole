<!DOCTYPE html>
<html lang="ko"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<body>
<!-- 극한 최적화 사이드바 -->
<aside th:fragment="sidebar">
    <nav>
        <menu>
            <li>
                <a href="/boards"
                   th:attr="aria-current=${#httpServletRequest != null and #httpServletRequest.requestURI != null and #httpServletRequest.requestURI.startsWith('/boards') ? 'page' : null}">
                    📋 게시판
                </a>
            </li>

            <!-- 관리자 전용 -->
            <li sec:authorize="hasRole('ADMIN')">
                <a href="/users"
                   th:attr="aria-current=${#httpServletRequest != null and #httpServletRequest.requestURI != null and #httpServletRequest.requestURI.startsWith('/users') ? 'page' : null}">
                    👥 사용자 관리
                </a>
            </li>

            <!-- 사용자 메뉴 -->
            <li sec:authorize="hasRole('USER')">
                <a href="/users/mypage"
                   th:attr="aria-current=${#httpServletRequest != null and #httpServletRequest.requestURI != null and #httpServletRequest.requestURI.startsWith('/users/mypage') ? 'page' : null}">
                    👤 마이페이지
                </a>
            </li>

            <li sec:authorize="hasRole('USER')">
                <a href="/boards/write">✍️ 글쓰기</a>
            </li>
        </menu>
    </nav>
</aside>
</body>
</html>